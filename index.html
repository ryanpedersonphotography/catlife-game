<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CatLife - Special Needs Cat Caretaker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Start Screen -->
    <div id="start-screen" class="start-screen">
        <div class="start-container">
            <h1 class="game-title">üê± CATLIFE üê±</h1>
            <h2 class="game-subtitle">Special Needs Cat Caretaker</h2>
            
            <div class="start-form">
                <div class="input-group">
                    <label for="player-name">Enter Your Name:</label>
                    <input type="text" id="player-name" maxlength="20" placeholder="Cat Lover" autofocus>
                </div>
                
                <div class="difficulty-group">
                    <label>Select Difficulty:</label>
                    <div class="difficulty-buttons">
                        <button class="diff-btn" data-difficulty="easy">EASY</button>
                        <button class="diff-btn active" data-difficulty="normal">NORMAL</button>
                        <button class="diff-btn" data-difficulty="hard">HARD</button>
                    </div>
                </div>
                
                <div class="game-mode-group">
                    <label>Select Game Mode:</label>
                    <div class="mode-buttons">
                        <button class="mode-btn active" data-mode="challenge">
                            <span class="mode-title">üèÜ CHALLENGE MODE</span>
                            <span class="mode-desc">Game ends at -50 score</span>
                        </button>
                        <button class="mode-btn" data-mode="endless">
                            <span class="mode-title">‚ôæÔ∏è ENDLESS MODE</span>
                            <span class="mode-desc">Play forever, no game over</span>
                        </button>
                    </div>
                </div>
                
                <button id="start-game-btn" class="start-game-btn">START GAME</button>
                <button id="continue-game-btn" class="continue-game-btn" style="display: none;">CONTINUE GAME</button>
            </div>
            
            <div class="high-scores">
                <h3>üèÜ HIGH SCORES üèÜ</h3>
                <div id="high-scores-list" class="high-scores-list"></div>
            </div>
        </div>
    </div>
    
    <!-- Game Container (hidden initially) -->
    <div class="game-container" id="game-container" style="display: none;">
        <header>
            <h1>üê± CatLife: Special Needs Cat Caretaker üê±</h1>
            <div class="stats">
                <span id="day">Day: 1</span>
                <span id="time">Time: Morning</span>
                <span id="score">Score: 0</span>
                <span id="energy-display">Energy: <span id="energy-bar"></span></span>
                <span id="time-display">Time: <span id="clock-display"></span></span>
                <button id="save-game-btn" class="save-game-btn" style="display: none;">üíæ Save Game</button>
            </div>
        </header>
        
        <!-- Cast Listing Panel -->
        <div class="cast-panel" id="cast-panel">
            <h3>üê± Cast Status üê±</h3>
            <div class="cast-list" id="cast-list">
                <!-- Cast members will be dynamically added here -->
            </div>
        </div>
        
        <main>
            <div class="rooms-container" id="rooms-container"></div>
            
            <div class="game-info">
                <div id="game-text" class="game-text"></div>
                <div class="action-panel" id="action-panel">
                    <h3>Click on a cat to see actions</h3>
                    <p class="action-hint">Select a cat by clicking on them in any room</p>
                </div>
            </div>
            
            <!-- Cat Action Popup Modal -->
            <div id="cat-popup" class="cat-popup-overlay">
                <div class="cat-popup">
                    <div class="cat-popup-header">
                        <h2 id="popup-cat-name">Cat Name</h2>
                        <button class="close-popup" id="close-popup">&times;</button>
                    </div>
                    <div class="cat-popup-body">
                        <div class="cat-info">
                            <div class="cat-svg-large" id="popup-cat-svg"></div>
                            <div class="cat-details">
                                <p id="popup-cat-mood">Mood: Happy</p>
                                <p id="popup-cat-location">Location: Kitchen</p>
                                <p id="popup-cat-trait">Trait: Gentle soul</p>
                            </div>
                        </div>
                        <div class="action-buttons" id="popup-action-buttons"></div>
                    </div>
                </div>
            </div>
            
            <!-- Bedtime Summary Modal -->
            <div id="bedtime-summary" class="bedtime-overlay">
                <div class="bedtime-modal">
                    <div class="bedtime-header">
                        <h2>üåô Bedtime Report - Day <span id="summary-day">1</span></h2>
                    </div>
                    <div class="bedtime-body">
                        <div class="summary-section">
                            <h3>üò¥ Sleep Status</h3>
                            <div id="sleep-status"></div>
                        </div>
                        
                        <div class="summary-section">
                            <h3>üìä Daily Statistics</h3>
                            <div class="stat-grid">
                                <div class="stat-item">
                                    <span class="stat-label">Cats Fed:</span>
                                    <span class="stat-value" id="cats-fed-stat">0/9</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Messes Cleaned:</span>
                                    <span class="stat-value" id="messes-cleaned-stat">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Play Sessions:</span>
                                    <span class="stat-value" id="play-sessions-stat">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Energy Used:</span>
                                    <span class="stat-value" id="energy-used-stat">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Happiness Average:</span>
                                    <span class="stat-value" id="happiness-avg-stat">0%</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Conflicts:</span>
                                    <span class="stat-value" id="conflicts-stat">0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-section">
                            <h3>üèÜ Score Summary</h3>
                            <div class="score-breakdown">
                                <div class="score-line">
                                    <span>Base Actions:</span>
                                    <span id="base-score">+0</span>
                                </div>
                                <div class="score-line">
                                    <span>Sleep Bonus/Penalty:</span>
                                    <span id="sleep-score">+0</span>
                                </div>
                                <div class="score-line">
                                    <span>Other Bonuses:</span>
                                    <span id="bonus-score">+0</span>
                                </div>
                                <div class="score-line total">
                                    <span>Day Total:</span>
                                    <span id="day-total-score">0</span>
                                </div>
                            </div>
                        </div>
                        
                        <button id="go-to-sleep-btn" class="go-to-sleep-btn">üõèÔ∏è Go to Sleep</button>
                    </div>
                </div>
            </div>
            
            <div class="input-section">
                <input type="text" id="player-input" placeholder="Type your action or click on a cat..." autofocus>
                <button id="submit-btn">Submit</button>
            </div>
            
            <div class="help-section">
                <h3>How to Play:</h3>
                <p>‚Ä¢ Click on a cat to open their action menu</p>
                <p>‚Ä¢ Click on üí© or üí¶ to clean up accidents!</p>
                <p>‚Ä¢ Some cats can't be in the same room together!</p>
                <p>‚Ä¢ Move cats between rooms to prevent conflicts</p>
                <p>‚Ä¢ Or use text commands: feed, clean, play, move [cat] to [room]</p>
                <div class="legend">
                    <h4>Visual Indicators:</h4>
                    <span style="color: #ff0000;">Red Room</span> = Conflict | 
                    <span style="color: #ff6666;">Red Cat</span> = Unhappy | 
                    üí© = Poop | üí¶ = Pee
                </div>
            </div>
        </main>
        
        <footer>
            <p>Take care of your special needs cats throughout the day!</p>
        </footer>
    </div>
    
    <script src="welcome-screen.js"></script>
    <script src="settings.js"></script>
    <script src="drag-drop.js"></script>
    <script src="game.js"></script>
    <script>
        // Initialize settings manager after DOM loads
        document.addEventListener('DOMContentLoaded', () => {
            if (window.settingsManager) {
                window.settingsManager.init();
            }
        });
    </script>
</body>
</html>